<!DOCTYPE html>
<html lang="de">

<head>
	<!-- Google tag (gtag.js) -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-90BTJB6LQR"></script>
	<script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-90BTJB6LQR');
	</script>

  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Admin-Dashboard | Aix-La-Chapelle Fightclub</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/admin.css" />
</head>

<body data-page="admin">
  <div class="admin-shell">
    <aside class="admin-sidebar" data-layout="sidebar">
      <div class="admin-sidebar-brand">
        <p class="admin-eyebrow">Adminbereich</p>
        <img src="img/icons/logo-ohne-background.png" alt="Little Champs Boxing Club Logo" class="admin-logo" />
        <h1 class="site-title">Aix-La-Chapelle Fightclub</h1>
        <p class="admin-subtitle">Mitgliederverwaltung &amp; Zahlungsübersicht</p>
        <button class="admin-menu-toggle" type="button" aria-label="Toggle Navigation">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="3" y1="12" x2="21" y2="12"></line>
            <line x1="3" y1="6" x2="21" y2="6"></line>
            <line x1="3" y1="18" x2="21" y2="18"></line>
          </svg>
        </button>
      </div>
      <nav class="admin-nav" aria-label="Admin Navigation">
        <button class="admin-nav-link is-active" type="button" data-nav="dashboard">
          Dashboard
        </button>
        <button class="admin-nav-link" type="button" data-nav="members">
          Mitglieder
        </button>
        <button class="admin-nav-link" type="button" data-nav="media">
          Media
        </button>
        <button class="admin-nav-link" type="button" data-nav="audit">
          Audit Log
        </button>
      </nav>
      <div class="admin-sidebar-footer">
        <a href="../index.html" class="nav-button admin-ghost">
          Zurück zur Startseite
        </a>
        <p class="admin-role">Angemeldet als <strong data-stat="role">—</strong></p>
        <button class="nav-button admin-logout" type="button" data-action="logout">
          Abmelden
        </button>
      </div>
    </aside>

    <div class="admin-content">
      <header class="admin-topbar">
        <div>
          <p class="admin-eyebrow">Admin Dashboard</p>
          <h2 class="admin-page-title" data-page-title>Dashboard</h2>
          <p class="admin-subtitle">
            Übersichtliche Verwaltung für Mitglieder, Zahlungen und Aktivitäten.
          </p>
        </div>
      </header>

      <main class="admin-main">
        <section class="hero admin-card admin-auth" data-section="setup">
          <h1>Verbinden Sie Ihre sicheren Admin-Dienste</h1>
          <p>
            Dieses Dashboard ist für ein verwaltetes Backend (Authentifizierung +
            Datenbank) vorbereitet. Fügen Sie Ihre Supabase-Projektzugangsdaten in
            <code>admin/js/config.js</code> ein, um sichere Anmeldung und
            Datenverwaltung zu aktivieren.
          </p>
          <ul class="list">
            <li><strong>Authentifizierung:</strong> Supabase Auth (E-Mail + Passwort).</li>
            <li><strong>Datenbank:</strong> <code>members</code>-Tabelle mit Row-Level-Security.</li>
            <li><strong>Zahlungen:</strong> Nur Status speichern (keine Kartendaten).</li>
          </ul>
          <p class="form-note">
            Diese Seite akzeptiert keine Anmeldungen, bis gültige Zugangsdaten
            konfiguriert sind.
          </p>
        </section>

        <div class="admin-auth-container" data-section="login">
          <section class="admin-auth-card">
            <div class="admin-auth-header">
              <img src="img/icons/logo-ohne-background.png" alt="Little Champs Boxing Club Logo"
                class="admin-auth-logo" />
              <h1>Admin-Anmeldung</h1>
              <p>Nur autorisiertes Personal sollte auf Mitgliederdetails zugreifen.</p>
            </div>

            <form class="admin-form" data-form="login">
              <div class="form-group">
                <label for="login-email">E-Mail</label>
                <input id="login-email" type="email" name="email" placeholder="ihre@email.de" autocomplete="username"
                  required />
              </div>

              <div class="form-group">
                <label for="login-password">Passwort</label>
                <input id="login-password" type="password" name="password" placeholder="••••••••"
                  autocomplete="current-password" required />
              </div>

              <button class="nav-button login-btn" type="submit">Anmelden</button>

              <div class="auth-footer">
                <a href="../index.html" class="back-link">
                  ← Zurück zur Startseite
                </a>
              </div>
            </form>
            <p class="form-note" data-status="login"></p>
          </section>
        </div>

        <section class="admin-page" data-page-section="dashboard">
          <div class="admin-page-header">
            <div>
              <h2>Dashboard</h2>
              <p>Die wichtigsten Kennzahlen auf einen Blick.</p>
            </div>
            <div class="admin-summary">
              <p>Aktualisiert in Echtzeit nach Anmeldung.</p>
            </div>
          </div>
          <div class="card-grid admin-stats">
            <div class="card stat-card stat-card-total">
              <div class="stat-icon-wrapper">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                  stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                  class="stat-icon">
                  <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                  <circle cx="9" cy="7" r="4"></circle>
                  <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                  <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                </svg>
              </div>
              <div>
                <h3>Mitglieder gesamt</h3>
                <p class="stat" data-stat="total">0</p>
              </div>
            </div>
            <div class="card stat-card stat-card-active">
              <div class="stat-icon-wrapper">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                  stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                  class="stat-icon">
                  <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                  <polyline points="22 4 12 14.01 9 11.01"></polyline>
                </svg>
              </div>
              <div>
                <h3>Aktive Mitgliedschaften</h3>
                <p class="stat" data-stat="active">0</p>
              </div>
            </div>
            <div class="card stat-card stat-card-paid">
              <div class="stat-icon-wrapper">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                  stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                  class="stat-icon">
                  <rect x="2" y="5" width="20" height="14" rx="2"></rect>
                  <line x1="2" y1="10" x2="22" y2="10"></line>
                </svg>
              </div>
              <div>
                <h3>Zahlungen aktuell</h3>
                <p class="stat" data-stat="paid">0</p>
              </div>
            </div>
          </div>
        </section>

        <section class="admin-page" data-page-section="members">
          <div class="admin-page-header">
            <div>
              <h2>Mitgliederverzeichnis</h2>
              <p>Mitgliedsstatus suchen, prüfen und aktualisieren.</p>
            </div>
            <div class="admin-actions">
              <button class="nav-button" type="button" data-action="open-member-modal">
                Mitglied hinzufügen
              </button>
              <button class="nav-button" type="button" data-action="export">
                Excel exportieren
              </button>
              <button class="nav-button" type="button" data-action="refresh">
                Aktualisieren
              </button>
            </div>
          </div>
          <div class="admin-filters" aria-label="Mitgliederfilter">
            <label class="admin-field" for="member-search">
              <span>Schnellsuche</span>
              <input id="member-search" type="search" placeholder="Name, Status, Tarif..." autocomplete="off"
                data-filter="search" />
            </label>
            <label class="admin-field" for="filter-status">
              <span>Status</span>
              <select id="filter-status" data-filter="status">
                <option value="all">Alle</option>
                <option value="Active">Aktiv</option>
                <option value="Paused">Pausiert</option>
                <option value="Inactive">Inaktiv</option>
              </select>
            </label>
            <label class="admin-field" for="filter-payment">
              <span>Zahlung</span>
              <select id="filter-payment" data-filter="payment">
                <option value="all">Alle</option>
                <option value="Up to Date">Aktuell</option>
                <option value="Needs Follow-up">Nachfassen nötig</option>
                <option value="Past Due">Überfällig</option>
              </select>
            </label>
            <button class="nav-button admin-reset" type="button" data-action="reset-filters">
              Filter zurücksetzen
            </button>
          </div>
          <p class="admin-results" data-results="members">Zeige 0 Mitglieder.</p>
          <div class="admin-empty" data-empty="members">
            <h3>Noch keine Mitglieder</h3>
            <p>
              Sobald Mitglieder erfasst sind, erscheinen sie hier. Nutzen Sie
              „Mitglied hinzufügen“, um zu starten.
            </p>
          </div>
          <div class="admin-table-wrapper" data-table-wrapper="members">
            <table class="admin-table">
              <thead>
                <tr>
                  <th>Name</th>
                  <th>Status</th>
                  <th>Tarif</th>
                  <th>Zahlung</th>
                  <th>Zuletzt aktualisiert</th>
                  <th data-column="actions">Aktionen</th>
                </tr>
              </thead>
              <tbody data-table="members">
                <tr>
                  <td colspan="6">Noch keine Mitglieder geladen.</td>
                </tr>
              </tbody>
            </table>
          </div>
        </section>

        <section class="admin-page" data-page-section="media">
          <div class="admin-page-header">
            <div>
              <h2>Media Galerie</h2>
              <p>YouTube-Videos hinzufügen oder entfernen.</p>
            </div>
            <div class="admin-summary">
              <p>Nur Admins können Änderungen vornehmen.</p>
            </div>
          </div>
          <div class="card-grid">
            <div class="card">
              <h3>Neues Video hinzufügen</h3>
              <form class="admin-form" data-form="media">
                <label for="media-url">YouTube-Link *</label>
                <input id="media-url" type="url" name="url" placeholder="https://youtu.be/VIDEO_ID" required />

                <label for="media-title">Titel (optional)</label>
                <input id="media-title" type="text" name="title" placeholder="z.B. Training Highlights" />

                <button class="nav-button" type="submit">Video hinzufügen</button>
              </form>
              <p class="form-note" data-status="media"></p>
            </div>
            <div class="card admin-media-card">
              <h3>Aktuelle Videos</h3>
              <p class="form-note">Einträge werden sofort synchronisiert.</p>
              <div class="admin-empty" data-empty="media">
                <h3>Noch keine Videos</h3>
                <p>Fügen Sie den ersten YouTube-Link hinzu, um zu starten.</p>
              </div>
              <div class="admin-media-list" data-list="media"></div>
            </div>
          </div>
        </section>

        <section class="admin-page" data-page-section="audit">
          <div class="admin-page-header">
            <div>
              <h2>Audit Log</h2>
              <p>Aktuelle administrative Aktivitäten in chronologischer Reihenfolge.</p>
            </div>
            <div class="admin-actions">
              <button class="nav-button" type="button" data-action="refresh-audit">
                Aktualisieren
              </button>
            </div>
          </div>
          <label class="admin-field" for="audit-search">
            <span>Schnellsuche</span>
            <input id="audit-search" type="search" placeholder="Akteur, Aktion, Details..." autocomplete="off"
              data-filter="audit-search" />
          </label>
          <p class="admin-results" data-results="audit">Zeige 0 Einträge.</p>
          <div class="admin-empty" data-empty="audit">
            <h3>Kein Prüfprotokoll verfügbar</h3>
            <p>Hier erscheinen Aktivitäten, sobald administrative Aktionen durchgeführt werden.</p>
          </div>
          <div class="admin-table-wrapper" data-table-wrapper="audit">
            <table class="admin-table">
              <thead>
                <tr>
                  <th>Zeit</th>
                  <th>Akteur</th>
                  <th>Aktion</th>
                  <th>Entität</th>
                  <th>Details</th>
                </tr>
              </thead>
              <tbody data-table="audit">
                <tr>
                  <td colspan="5">Noch keine Prüfaktivitäten.</td>
                </tr>
              </tbody>
            </table>
          </div>
        </section>
      </main>
    </div>
  </div>

  <div class="admin-modal admin-hidden" data-modal="member" aria-modal="true" role="dialog">
    <div class="admin-modal-overlay" data-action="close-member-modal"></div>
    <div class="admin-modal-card">
      <div class="admin-modal-header">
        <div>
          <p class="admin-eyebrow">Mitglieder</p>
          <h2 data-member-modal-title>Mitglied hinzufügen</h2>
          <p class="admin-subtitle">
            Neue Mitglieder anlegen oder vorhandene Daten aktualisieren.
          </p>
        </div>
        <button class="admin-modal-close" type="button" data-action="close-member-modal">
          ✕
        </button>
      </div>
      <form class="admin-form" data-form="member">
        <input id="member-id" name="id" type="hidden" />
        <label for="member-name">Vollständiger Name *</label>
        <input id="member-name" name="full_name" type="text" required />

        <label for="member-status">Mitgliedsstatus *</label>
        <select id="member-status" name="status" required>
          <option value="Active">Aktiv</option>
          <option value="Paused">Pausiert</option>
          <option value="Inactive">Inaktiv</option>
        </select>

        <label for="member-plan">Tarif *</label>
        <select id="member-plan" name="plan" required>
          <option value="Drop-In">Einzelbesuch</option>
          <option value="Monthly Explorer">Monats-Entdecker</option>
          <option value="All-Star Unlimited">All-Star Unbegrenzt</option>
        </select>

        <label for="member-payment">Zahlungsstatus *</label>
        <select id="member-payment" name="payment_status" required>
          <option value="Up to Date">Aktuell</option>
          <option value="Needs Follow-up">Nachfassen nötig</option>
          <option value="Past Due">Überfällig</option>
        </select>

        <div class="admin-modal-actions">
          <button class="nav-button" type="submit">Mitglied speichern</button>
          <button class="nav-button admin-ghost" type="button" data-action="close-member-modal">
            Abbrechen
          </button>
        </div>
      </form>
      <p class="form-note" data-status="member"></p>
    </div>
  </div>

  <footer>
    <p>
      Der Adminzugriff ist durch verwaltete Authentifizierung und sichere Datenbankregeln
      geschützt.
    </p>
    <div class="footer-badges">
      <span class="badge">Rollenbasierter Zugriff</span>
      <span class="badge">Keine Kartendaten</span>
      <span class="badge">Prüfbereit</span>
    </div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="https://cdn.jsdelivr.net/npm/exceljs@4.4.0/dist/exceljs.min.js"></script>
  <script src="js/theme-manager.js"></script>
  <script type="module" src="js/admin.js"></script>
</body>

</html>